<!-- emails/templates/dashboard_emails.html -->

{% extends 'dashboard_base.html' %}

{% block body %}
<main class="col-md-9 ml-sm-auto col-lg-10 px-4 p-1 my-container active-cont">
  <nav class="navbar top-navbar navbar-light justify-content-start px-5">
    <a class="btn border-0" id="menu-btn"><i class="bi bi-menu-button"></i></a>
  </nav>
  <h4>Email Dashboard</h4>
  <hr>
  <div class="row">
    {% for stat in subject_stats %}
      <div class="col-sm-4">
        <div class="card text-center text-white bg-dark mb-3 w-50 mx-auto">
          <div class="card-body">
            <h5 class="card-title">{{ stat.name }}</h5>
            <p class="card-text">{{ stat.count }}</p>
            <div class="single-chart">
              <svg viewBox="0 0 36 36" class="circular-chart green">
                <path class="circle-bg"
                  d="M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831"
                />
                <path class="circle"
                  stroke-dasharray="{{ stat.percentage }}, 100"
                  d="M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831"
                />
                <text x="18" y="20.35" class="percentage">{{ stat.percentage }}%</text>
              </svg>
            </div>
            <a class = "btn btn-primary" href="{% url 'emails:email-list' %}?subject_type={{ stat.id }}"
               role="button">View</a>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
</main>
{% endblock %}